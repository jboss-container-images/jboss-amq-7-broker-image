schema_version: 1

from: "registry-proxy.engineering.redhat.com/ubi8:8.1-406"
name: &name "amq-broker-7/amq-broker-75-openj9-11-rhel8"
version: &version "7.5"

labels:
- name: "com.redhat.component"
  value: "amq-broker-openj9-11-rhel8-container"

envs:
- name: "JBOSS_IMAGE_NAME"
  value: *name
- name: "JBOSS_IMAGE_VERSION"
  value: *version

modules:
      repositories:
          - path: modules
          - name: cct_module
            git:
                 url: https://github.com/artemiscloud/cct_module.git
                 ref: 0.38.0-amq
          - name: cct_module_j9
            git:
                 url: https://github.com/jboss-openshift/cct_module.git
                 ref: 0.39.0

      install:
          - name: jboss.container.user
          - name: jboss.container.openjdk.jdk
            version: "openj9-11"
          - name: amq.broker75.install
          - name: amq.broker75.chown

osbs:
  configuration:
    container:
      platforms:
        only:
          - s390x
          #- x86_64
          - ppc64le
      compose:
        pulp_repos: true
        packages:
          - java-11-openj9-devel
        signing_intent: release
        # used for inheritance of yum repos and ODCS composes from baseimage build
        inherit: true
  repository:
    name: containers/amq-broker
    branch: amq-broker-7.5-openj9-11-rhel8
